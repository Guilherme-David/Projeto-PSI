{% extends 'base.html' %}

{% block titulo %} FDG Burguer - Cardápio {% endblock %}
{% block css %} <link rel="stylesheet" href="static/css/produtos.css"> {% endblock %}

{% block conteudo %}
    <main>
        
        {% set _ = get_flashed_messages() %} <!-- Gambiarra para parar de dar erro nas mensagens flash -->

        <header>
            <span class="text"> <p> FDG BURGUER </p>
                <h1> Cardápio </h1>
            </span>
            {% if is_admin %} 
                {% include 'mensagens.html' %}
                <button class="showhide-new"> Novo Produto </button>
            {% endif %}
        </header>
        <div class="main-produtos">
            <section class="sectionprodutos">
                <h2> Hambúrgueres </h2>
                <span class="line"> </span>
                <div class="produtos">
                    {% for produto in hamburguers %}
                        {% include 'includes/produto.html' %}
                    {% endfor %}
                </div>
            </section>
            <section class="sectionprodutos">
                <h2> Bebidas </h2>
                <span class="line"> </span>
                <div class="produtos">
                    {% for produto in bebidas %}
                        {% include 'includes/produto.html' %}
                    {% endfor %}
                </div>
            </section>
            <section class="sectionprodutos">
                <h2> Sobremesas </h2>
                <span class="line"> </span>
                <div class="produtos">
                    {% for produto in sobremesas %}
                        {% include 'includes/produto.html' %}
                    {% endfor %}
                </div>
            </section>
        </div>
        <div id="newproduto" class="overlay hide">
            <div class="popup-adicionar"> 
                <span class="popup-header">
                    <h2> Cadastro de Produto</h2>
                    <button class="showhide-close ">&times;</button>
                </span>
                <form method="post" action="{{ url_for('adicionar') }}">
                    <label for="nome"> Nome do produto: </label>
                    <input type="text" id="nome" required name="nome">
                    <label for="preco"> Preço produto: </label>
                    <input type="text" id="preco" required name="preco">
                    <label for="categoria"> </label>
                    <select name="categoria" id="categoria" required> 
                        <option value="hamburguers"> Hambúrgueres </option>
                        <option value="sobremesas"> Sobremesas </option>
                        <option value="bebidas"> Bebidas </option>
                    </select>
                    <label for="url"> Imagem do Produto(URL): </label>
                    <input type="url" id="url" required name="url">
                    <button type="submit"> Adicionar</button>
                </form>
            </div>
        </div>
    </main>
    
    <script>
        document.querySelectorAll('.showhide-new').forEach(button => {
            button.addEventListener('click', () => {
            const container = document.getElementById('newproduto');
            container.classList.toggle('hide');
            });
        });

        document.querySelectorAll('#newproduto .showhide-close').forEach(button => {
            button.addEventListener('click', () => {
                const overlay = button.closest('.overlay');
                overlay.classList.add('hide');
            });
        });        
    </script>
{% endblock %}