{% extends 'base.html' %}

{% block titulo %} FDG Burguer - Cardápio {% endblock %}
{% block css %} <link rel="stylesheet" href="static/css/produtos.css"> {% endblock %}

{% block conteudo %}
    <main>
        <header>
            <span class="text"> <p> FDG BURGUER </p>
                <h1> Cardápio </h1>
            </span>
            {% if is_admin %} 
                <button class="showhide"> Novo Produto </button>
            {% endif %}
        </header>
        <div class="main-produtos">
            {% for produto in produtos %}
                <div class="produto">
                    <span class="img"> <img src="{{ produto.imagem}}"> </span>
                    <span class="caption"> 
                        {% set preco = produto.preco|float(0) %}
                        <p class="produtonome"> {{ produto.nome }} </p>
                        <p class="produtopreço"> R$ {{ "{:,.2f}".format(preco).replace(",", "X").replace(".", ",").replace("X", ".") }} </p>
                        {% if is_admin %}
                                <form method="post" action="{{ url_for('remover', item=produto.id) }}">
                                    <button type="submit" onclick="return confirm('Deseja mesmo remover este item?')">
                                        &#128465;
                                    </button>
                                </form>                        
                        {% endif %}
                    </span>
                </div>
            {% endfor %}
        </div>
        <div id="newproduto" class="overlay hide">
            <div class="popup-adicionar"> 
                <span class="popup-header">
                    <h2> Cadastro de Produto</h2>
                    <button class="showhide">&times;</button>
                </span>
                <form method="post" action="{{ url_for('adicionar') }}">
                    <label for="nome"> Nome do produto: </label>
                    <input type="text" id="nome" required name="nome">
                    <label for="preco"> Preço produto: </label>
                    <input type="text" id="preco" required name="preco">
                    <label for="url"> Imagem do Produto(URL): </label>
                    <input type="url" id="url" required name="url">
                    <button type="submit"> Adicionar</button>
                </form>
            </div>
        </div>
    </main>
    
    <script>
        document.querySelectorAll('.showhide').forEach(button => {
            button.addEventListener('click', () => {
            const container = document.getElementById('newproduto');
            container.classList.toggle('hide');
            });
        });
    </script>
{% endblock %}